# pymongo-api

## Как запустить

Запускаем mongodb и приложение
```shell
docker compose up -d
```

Инициализируем все инстансы
```shell
./scripts/mongo-init.sh
```

## Шаги
* Запускается инстанс mongo в режиме configsrv, который далее будет хранить не пользовательские данные, а конфигурацию кластера mongo.
* Запускаем инстанс mongo в режиме router, который будет спрашивать актуальную конфигурацию кластера у configsrv и перенаправлять запросы к шардам. Все запросы к СУБД будут идти через этот узел.
* Запускаем 6 инстансов mongo в качестве шардов с данными. Их мы объединим в две группы реплик с помощью --replSet. Также на этапе инициализации нужно прописать все реплики группы.